<style>
    .panel-default {
        display: none;
        width: 25%;
        background-color: #fff;
        position: absolute;
        top: 55px;
        right: 5px;
        border-radius: 5px;
        box-shadow: 1px 1px 5px rgba(146, 142, 142, 0.911);
    }

    .panel-heading>button {
        position: absolute;
        right: 20px;
        top: 10px;
    }
    /* .panel-body{
        max-height: 80vh;
        overflow-y: auto;
    } */
    .fill-after:after {
        content: '.';
        height: 0;
        display: block;
        clear: both;
        visibility: hidden;
    }

    .m10 {
        margin: 10px;
    }

    .detail-button {
        margin-left: 20px;
        color: #00aaff;
        cursor: pointer
    }

    .file-box {
        width: 50px;
        height: 60px;
        border: 1px solid #000;
        float: left;
        padding: 4px;
        line-height: 25px;
    }

    .progress-content {
        width: 60%;
        float: left;
        margin: 0 10px;
    }

    .center-33p {
        display: inline-block;
        width: 33%;
        text-align: center;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .w28p {
        width: 28%;
    }

    .left-63p {
        display: inline-block;
        width: 63%;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .cancel-button {
        width: 10%;
        float: left;
        margin-left: 20px;
        color: #00aaff;
        cursor: pointer;
    }

    .no-task {
        margin-left: 10px;
        color: red;
    }

    .mask {
        position: fixed;
        /* background-color: gray; */
        width: 100%;
        height: 100%;
        opacity: 0.5;
        z-index: 3;
    }
</style>
<div class="panel panel-default" id="progress">
    <div class="panel-heading list-history">
        同步列表
        <button class="btn btn-default btn-sm" ng-click="$parent.selectHistoryList('list-history','history')">同步历史</button>
    </div>
    <div class="panel-body list-history">
        <div ng-show="cogradient.requesting">
            <div ng-include="config.tplPath + '/spinner.html'"></div>
            <div style="text-align:center;">加载中，请稍后。。。</div>
        </div>
        <div class="fill-after">
            <h5>当前设备:{{cogradient.device.name}}</h5>
            <!-- <div class="fill-after m10">
                <div class="file-box">文件预览</div>
                <div class="progress-content">
                    <div>
                        <span class="left-63p" title="文件1">文件1</span>
                        <span class="center-33p">250KB/s</span>
                    </div>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
                            <span class="sr-only">40% 完成</span>
                        </div>
                    </div>
                </div>
                <div class="cancel-button">
                    取消
                </div>
            </div> -->
            <div class="fill-after m10" ng-repeat="item in cogradient.list">
                <div class="file-box">文件预览</div>
                <div class="progress-content">
                    <div>
                        <span class="left-63p" title="{{item.key | formatName}}">{{item.key | formatName}}</span>
                        <span class="center-33p" title="{{item.uploadSpeed | formatKB}}KB">{{item.uploadSpeed | formatKB}}KB/s</span>
                    </div>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{item.progress}}%;"
                            title="{{item.progress}}%">
                            <span class="sr-only">{{item.progress}}</span>
                        </div>
                    </div>
                </div>
                <div class="cancel-button" ng-click="cancelTask(item.fromRouter,item.key)">
                    取消
                </div>
            </div>
        </div>
        <div class="fill-after">
            <h5>其他设备</h5>
            <!-- <div class="fill-after">
                <h6>大爷的电脑
                    <span class="detail-button" ng-click="$parent.progress('c9')">收起</span>
                </h6>
                <div style="margin:10px;" id="c9">
                    <div class="file-box">文件预览</div>
                    <div class="progress-content">
                        <div>
                            <span class="left-63p" title="文件1">文件1</span>
                            <span class="center-33p">250KB/s</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
                                <span class="sr-only">40% 完成</span>
                            </div>
                        </div>
                    </div>
                    <div class="cancel-button">
                        取消
                    </div>
                </div>
            </div> -->
            <div class="fill-after" ng-repeat="item in cogradient.deviceLists">
                <h6>{{item.name}}
                    <span class="detail-button" ng-click="$parent.showDetail(item.routerId)">
                        <span ng-show="item.hidden">详情</span>
                        <span ng-hide="item.hidden">收起</span>
                    </span>
                </h6>
                <div class="fill-after m10 detail-show" ng-hide="item.hidden" ng-repeat="subItem in item.list">
                    <div class="file-box">文件预览</div>
                    <div class="progress-content">
                        <div>
                            <span class="left-63p" title="subItem.key">{{subItem.key}}</span>
                            <span class="center-33p">{{subItem.uploadSpeed | formatKB}}KB/s</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{subItem.progress}}%;">
                                <span class="sr-only">{{subItem.progress}}% 完成</span>
                            </div>
                        </div>
                    </div>
                    <div class="cancel-button" ng-click="cancelTask(subItem.fromRouter,subItem.key)">
                        取消
                    </div>
                </div>
                <div class="no-task" ng-show="!item.hidden&&!item.child">当前设备无同步任务</div>
            </div>
        </div>
    </div>
    <div class="panel-heading list-history" style="display:none;">
        同步历史
        <button class="btn btn-default btn-sm" ng-click="$parent.selectHistoryList('list-history','list')">同步列表</button>
    </div>
    <div class="panel-body list-history" style="display:none;">
        <div ng-show="cogradient.requesting">
            <div ng-include="config.tplPath + '/spinner.html'"></div>
            <div style="text-align:center;">加载中，请稍后。。。</div>
        </div>
        <div class="fill-after m10" ng-repeat="item in $parent.historyTask = cogradient.historyList">
            <div class="file-box">文件预览</div>
            <div class="progress-content">
                <div>
                    <span class="left-63p" title="{{item.fromPath | formatName}}">{{item.fromPath | formatName}}</span>
                    <span></span>
                    <span class="center-33p" style="color:red;" ng-show="item.progress !=100">同步失败</span>
                    <span class="center-33p" style="color:blue;" ng-hide="item.progress !=100">同步成功</span>
                </div>
                <div>
                    <span class="center-33p" title="{{item.fromRouterName}}">{{item.fromRouterName}}</span>
                    <span class="center-33p w28p">----&gt;</span>
                    <span class="center-33p" title="{{item.toRouterName}}">{{item.toRouterName}}</span>
                </div>
            </div>
            <div class="cancel-button" ng-click="reSynchro(item)">
                <span ng-show="item.progress !=100">重新同步</span>
                <span ng-hide="item.progress !=100">再次同步</span>
            </div>
        </div>
    </div>
</div>